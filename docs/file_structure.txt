backend/
├── config/
│   ├── db.js                          # MongoDB connection (existing)
│   ├── socket.js                      # Socket.IO server configuration (NEW)
│   ├── constants.js                   # App constants (existing)
│   └── corsOptions.js                 # CORS configuration (existing)
│
├── middleware/
│   ├── auth.js                        # JWT verification for REST (existing)
│   ├── roleCheck.js                   # RBAC middleware (existing)
│   ├── rateLimiter.js                 # Rate limiting (existing)
│   └── errorHandler.js                # Error handler (existing)
│
├── models/
│   ├── User.js                        # User model (existing)
│   ├── Conversation.js                # Conversation schema (NEW)
│   ├── Message.js                     # Message schema (NEW)
│   └── ReadReceipt.js                 # Read tracking (NEW)
│
├── routes/
│   ├── auth.js                        # Auth routes (existing)
│   ├── user.js                        # User routes (existing)
│   ├── conversation.js                # Conversation CRUD (NEW)
│   ├── message.js                     # Message history (NEW)
│   └── search.js                      # Search users/chats (NEW)
│
├── controllers/
│   ├── authController.js              # Auth logic (existing)
│   ├── userController.js              # User logic (existing)
│   ├── conversationController.js      # Conversation operations (NEW)
│   ├── messageController.js           # Message operations (NEW)
│   └── searchController.js            # Search logic (NEW)
│
├── services/
│   ├── conversationService.js         # Conversation business logic (NEW)
│   ├── messageService.js              # Message processing (NEW)
│   ├── presenceService.js             # Online/offline tracking (NEW)
│   └── searchService.js               # Search logic (NEW)
│
├── socket/
│   ├── index.js                       # Socket.IO initialization (NEW)
│   │
│   ├── handlers/
│   │   ├── connectionHandler.js       # Connect/disconnect (NEW)
│   │   ├── messageHandler.js          # Message events (NEW)
│   │   ├── typingHandler.js           # Typing indicators (NEW)
│   │   ├── presenceHandler.js         # Online status (NEW)
│   │   └── readReceiptHandler.js      # Read receipts (NEW)
│   │
│   └── middleware/
│       ├── socketAuth.js              # Socket JWT auth (NEW)
│       ├── socketAuthorization.js     # Room access control (NEW)
│       └── socketRateLimit.js         # Event throttling (NEW)
│
├── utils/
│   ├── jwt.js                         # JWT utilities (existing)
│   ├── validators.js                  # Input validation (existing/extend)
│   ├── pagination.js                  # Cursor pagination (NEW)
│   └── responseFormatter.js           # JSON response format (existing)
│
├── tests/
│   ├── unit/
│   │   ├── models/                    # Model tests
│   │   ├── services/                  # Service tests
│   │   └── utils/                     # Utility tests
│   │
│   ├── integration/
│   │   ├── auth.test.js               # Auth flow tests
│   │   ├── conversation.test.js       # Conversation API tests (NEW)
│   │   └── message.test.js            # Message API tests (NEW)
│   │
│   └── socket/
│       ├── connection.test.js         # Socket connection tests (NEW)
│       ├── message.test.js            # Message events tests (NEW)
│       └── presence.test.js           # Presence tests (NEW)
│
├── .env                               # Environment variables
├── .env.example                       # Environment template
├── .gitignore                         # Git ignore
├── server.js                          # Entry point (modify to init socket)
├── package.json                       # Dependencies
└── README.md                          # Documentation


frontend/
├── public/
│   ├── favicon.ico
│   ├── index.html
│   └── manifest.json
│
├── src/
│   ├── assets/
│   │   ├── images/
│   │   │   ├── avatar-placeholder.png
│   │   │   └── logo.png
│   │   └── icons/
│   │       ├── send.svg
│   │       ├── emoji.svg
│   │       └── attachment.svg
│   │
│   ├── components/
│   │   ├── chat/
│   │   │   ├── ChatContainer.jsx      # Main chat wrapper
│   │   │   ├── ChatHeader.jsx         # Chat title/info
│   │   │   ├── MessageList.jsx        # Scrollable messages
│   │   │   ├── MessageItem.jsx        # Single message
│   │   │   ├── MessageInput.jsx       # Input field + send
│   │   │   ├── TypingIndicator.jsx    # "User is typing..."
│   │   │   ├── OnlineStatus.jsx       # Online/offline badge
│   │   │   └── EmojiPicker.jsx        # Emoji selector
│   │   │
│   │   ├── sidebar/
│   │   │   ├── Sidebar.jsx            # Left sidebar container
│   │   │   ├── ConversationList.jsx   # List of chats
│   │   │   ├── ConversationItem.jsx   # Single chat preview
│   │   │   ├── SearchBar.jsx          # Search input
│   │   │   └── UserProfile.jsx        # Current user info
│   │   │
│   │   ├── modals/
│   │   │   ├── NewChatModal.jsx       # Create 1:1 chat
│   │   │   ├── NewGroupModal.jsx      # Create group
│   │   │   ├── GroupSettingsModal.jsx # Edit group
│   │   │   └── UserSearchModal.jsx    # Search users
│   │   │
│   │   ├── auth/
│   │   │   ├── LoginForm.jsx          # Login component
│   │   │   ├── SignupForm.jsx         # Signup component
│   │   │   ├── ProtectedRoute.jsx     # Auth guard
│   │   │   └── AuthLayout.jsx         # Auth pages wrapper
│   │   │
│   │   └── common/
│   │       ├── Avatar.jsx             # User avatar
│   │       ├── Button.jsx             # Reusable button
│   │       ├── Input.jsx              # Reusable input
│   │       ├── Loader.jsx             # Loading spinner
│   │       ├── Badge.jsx              # Notification badge
│   │       └── Dropdown.jsx           # Dropdown menu
│   │
│   ├── pages/
│   │   ├── HomePage.jsx               # Main chat page
│   │   ├── LoginPage.jsx              # Login page
│   │   ├── SignupPage.jsx             # Signup page
│   │   └── ProfilePage.jsx            # User profile
│   │
│   ├── hooks/
│   │   ├── useAuth.js                 # Auth context hook
│   │   ├── useSocket.js               # Socket.IO connection
│   │   ├── useChat.js                 # Chat operations
│   │   ├── useMessages.js             # Message handling
│   │   ├── useTyping.js               # Typing indicators
│   │   ├── usePresence.js             # Online status
│   │   ├── useInfiniteScroll.js       # Message pagination
│   │   └── useDebounce.js             # Debounce utility
│   │
│   ├── context/
│   │   ├── AuthContext.jsx            # Auth state management
│   │   ├── SocketContext.jsx          # Socket instance provider
│   │   └── ChatContext.jsx            # Active chat state
│   │
│   ├── services/
│   │   ├── api.js                     # Axios instance + interceptors
│   │   ├── authService.js             # Auth API calls
│   │   ├── chatService.js             # Chat REST API
│   │   ├── messageService.js          # Message REST API
│   │   ├── searchService.js           # Search API
│   │   └── socketService.js           # Socket event emitters
│   │
│   ├── utils/
│   │   ├── tokenManager.js            # Token refresh logic
│   │   ├── dateFormatter.js           # Date/time formatting
│   │   ├── validators.js              # Form validation
│   │   ├── storage.js                 # LocalStorage wrapper
│   │   └── constants.js               # App constants
│   │
│   ├── styles/
│   │   ├── globals.css                # Global styles
│   │   ├── variables.css              # CSS variables
│   │   └── animations.css             # Animation keyframes
│   │
│   ├── App.jsx                        # Root component
│   ├── main.jsx                       # React entry point
│   └── router.jsx                     # Route definitions
│
├── .env                               # Environment variables
├── .env.example                       # Environment template
├── .gitignore                         # Git ignore
├── package.json                       # Dependencies
├── vite.config.js                     # Vite config
├── tailwind.config.js                 # Tailwind config (if using)
├── eslint.config.js                   # ESLint config
└── README.md                          # Documentation
